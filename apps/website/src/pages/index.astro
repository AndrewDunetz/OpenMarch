---
import Layout from "@/layouts/Layout.astro";
import { Button } from "@openmarch/ui";
import { getCollection, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import FeatureSelector from "@/components/home/FeatureSelector";
import { CURRENT_VERSION } from "@/constants";
import NewsletterForm from "@/components/ui/NewsletterForm";

const blogs = await getCollection("blog");
type Blog = CollectionEntry<"blog">;
---

<Layout title="Home">
    <script>
        import { Observer } from "tailwindcss-intersect";

        Observer.start();
    </script>
    <section
        id="landing"
        class="relative flex h-fit flex-col items-center justify-center gap-16 border border-stroke pt-32 pb-8 px-8 rounded-[14px]"
    >
        <code
            class="font-mono text-[1.25rem] text-accent intersect:motion-preset-fade-lg motion-delay-100"
            >{CURRENT_VERSION}</code
        >
        <h1
            class="text-h1 leading-[130%] w-[512px] tracking-tighter text-center intersect:motion-preset-slide-up motion-delay-150 max-[1450px]:text-[64px] max-[750px]:text-[48px]"
        >
            Free & open-source drill writing software
        </h1>
        <p class="text-body intersect:motion-preset-fade-lg motion-delay-250">
            OpenMarch is a free, open-source & intuitive drill writing app for
            the marching arts.
        </p>
        <div
            class="flex flex-wrap gap-8 intersect:motion-preset-fade-lg motion-delay-250"
        >
            <a href="/download">
                <Button>Download</Button>
            </a>
            <a href="/#features">
                <Button variant="secondary">Learn More</Button>
            </a>
        </div>

        <Image
            src={"/home/fullscreen-dark.png"}
            alt="Fullscreen Screenshot"
            width={1920}
            height={1080}
            format="webp"
            quality={80}
            class="hidden dark:block border border-stroke rounded-6 absolute aspect-video h-auto w-[80%] top-[24%] z-20 motion-preset-slide-up-sm motion-delay-300"
        />
        <Image
            src={"/home/fullscreen-light.png"}
            alt="Fullscreen Screenshot"
            width={1920}
            height={1080}
            format="webp"
            quality={80}
            class="block dark:hidden border border-stroke rounded-6 absolute aspect-video h-auto w-[80%] top-[24%] z-20 motion-preset-slide-up-sm motion-delay-300"
        />

        <Image
            src={"/home/editor-dark.png"}
            alt="Editor Screenshot"
            width={1920}
            height={1080}
            format="webp"
            quality={80}
            class="hidden dark:block border border-stroke rounded-6 z-30 mt-[350px] motion-preset-slide-up-sm motion-delay-[400ms]"
        />
        <Image
            src={"/home/editor-light.png"}
            alt="Editor Screenshot"
            width={1920}
            height={1080}
            format="webp"
            quality={80}
            class="block dark:hidden border border-stroke rounded-6 z-30 mt-[350px] motion-preset-slide-up-sm motion-delay-[400ms]"
        />
        <div
            class="absolute top-1/5 left-1/2 -translate-x-1/2 -z-50 size-[900px] rounded-full bg-accent opacity-40 blur-[20vmin] intersect:motion-preset-fade-lg"
        >
        </div>
    </section>
    <section id="features" class="relative flex h-fit flex-col gap-32">
        <div class="flex flex-col gap-16">
            <h2 class="text-h2">Drill writing</h2>
            <div class="grid grid-cols-4 grid-rows-2 gap-8">
                <div
                    class="grid grid-cols-2 grid-rows-2 gap-8 col-span-2 row-span-2"
                >
                    <div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div>
                </div><Image
                    src={"/home/editor-dark.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="hidden dark:block border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
                <Image
                    src={"/home/editor-light.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="block dark:hidden border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
            </div>
        </div><div class="flex flex-col gap-16">
            <h2 class="text-h2">Music</h2>
            <div class="grid grid-cols-4 grid-rows-2 gap-8">
                <Image
                    src={"/home/editor-dark.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="hidden dark:block border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
                <Image
                    src={"/home/editor-light.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="block dark:hidden border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
                <div
                    class="grid grid-cols-2 grid-rows-2 gap-8 col-span-2 row-span-2"
                >
                    <div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div>
                </div>
            </div>
        </div><div class="flex flex-col gap-16">
            <h2 class="text-h2">Field</h2>
            <div class="grid grid-cols-4 grid-rows-2 gap-8">
                <div
                    class="grid grid-cols-2 grid-rows-2 gap-8 col-span-2 row-span-2"
                >
                    <div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div><div
                        class="bg-fg-1 border border-stroke rounded-6 p-12 flex flex-col gap-8"
                    >
                        <h4 class="text-h4">Lorem ipsum</h4>
                        <p class="text-body leading-[180%]">
                            Lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum lorem ipsum lorem ipsum lorem ipsum
                            lorem ipsum
                        </p>
                    </div>
                </div><Image
                    src={"/home/editor-dark.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="hidden dark:block border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
                <Image
                    src={"/home/editor-light.png"}
                    alt="Editor Screenshot"
                    width={1920}
                    height={1080}
                    format="webp"
                    quality={80}
                    class="block dark:hidden border border-stroke rounded-6 intersect:motion-preset-fade-lg col-span-2 row-span-2 object-left object-cover aspect-square"
                />
            </div>
        </div>
    </section>
    <section id="blogs" class="flex flex-col gap-16">
        <div class="flex justify-between">
            <h1 class="text-h1">Blog</h1><a href="/blog"
                ><Button>See all posts</Button></a
            >
        </div>
        <div
            class="grid grid-cols-3 gap-24 max-[1200px]:grid-cols-2 max-[850px]:grid-cols-1"
        >
            {
                blogs
                    .sort(
                        (a, b) =>
                            new Date(b.data.date).getTime() -
                            new Date(a.data.date).getTime(),
                    )
                    .slice(0, 3)
                    .map((blog: Blog) => (
                        <a
                            href={`/blog/${blog.id}`}
                            class="flex flex-col gap-16 rounded-6 border border-stroke bg-fg-1 p-32 duration-150 ease-out hover:border-accent"
                        >
                            <Image
                                src={blog.data.image}
                                width={670}
                                height={420}
                                alt={blog.data.title}
                                class="aspect-video h-auto w-full rounded-6 border border-stroke object-cover"
                            />
                            <div class="flex w-full flex-col gap-16">
                                <h2 class="w-full text-h2">
                                    {blog.data.title}
                                </h2>
                                <p class="w-full text-body leading-[150%]">
                                    by {blog.data.author}
                                </p>
                                <p class="w-full text-body leading-[150%]">
                                    {blog.data.date.toLocaleDateString(
                                        "en-US",
                                        {
                                            year: "numeric",
                                            month: "long",
                                            day: "numeric",
                                            timeZone: "UTC",
                                        },
                                    )}
                                </p>
                            </div>
                        </a>
                    ))
            }
        </div>
    </section>
</Layout>
